<div>

  <h3>New Person</h3>

  <form class="form-horizontal login-form col-md-12" [formGroup]="this.getPersonForm()">

    <div class="form-row">

      <label class="col-md-1 col-form-label text-right" for="firstName">First name</label>
      <input type="text" id="firstName" name="firstName" formControlName="firstName"
             maxlength="30"
             class="form-control col-md-2"/>

      <div
        *ngIf="this.hasFirstNameFieldChanged"
        class="alert alert-danger">
        First name must be provided
      </div>

      <label class="col-md-2 col-form-label text-right" for="middleName">Middle Name</label>
      <input type="text" id="middleName" name="middleName" formControlName="middleName"
             maxlength="30"
             class="form-control col-md-2"/>

      <label class="col-md-2 col-form-label text-right" for="familyName">Family name</label>
      <input type="text" id="familyName" name="familyName" formControlName="familyName"
             maxlength="50"
             class="form-control col-md-2"/>
      <div
        *ngIf="this.hasFirstNameFieldChanged()"
        class="alert alert-danger">
        First name must be provided
      </div>

    </div>

    <div class="form-row" style="margin-top: 20px">

      <label class="col-md-1 col-form-label text-right">Gender</label>
      <select id="gender" name="gender" formControlName="gender" (change)="onChangeGender($event)">
        <option *ngFor="let gender of this.getGenders()" [value]="gender">{{gender.label}}</option>
      </select>

      <label class="col-md-2 col-form-label text-right">Title Type</label>
      <select id="titleType" name="titleType" formControlName="titleType" (change)="onChangeTitleType()">
        <option *ngFor="let titleType of getTitleTypes()" [value]="titleType">{{titleType.label}}</option>
      </select>

    </div>


    <div class="form-row" style="margin-top: 20px;">

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Titles</mat-panel-title>
          <mat-panel-description>
            Maintain the list of titles for this person. Use checkbox to set titles for person.
            These will be committed when details are saved.
          </mat-panel-description>
        </mat-expansion-panel-header>

        <!-- display checkbox per title-->
        <ag-grid-angular style="width: 100%; height: 250px;"
                         class="ag-theme-balham"
                         [rowData]="allTitles"
                         (rowSelected)="onRowSelectedTitle($event)"
                         (selectionChanged)="onRowSelectedTitleChanged($event)"
                         [columnDefs]="createTitlesColumnDefs()">
        </ag-grid-angular>

      </mat-expansion-panel>

    </div>

    <div class="form-row " style="margin-top: 20px;">

      <label class="col-md-12 col-form-label" style="margin-top: 20px;">Date of birth</label>

      <label for="dateOfBirthDayOfMonth"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Day</label>
      <input id="dateOfBirthDayOfMonth" name="dateOfBirthDayOfMonth"
             formControlName="dateOfBirthDayOfMonth"
             type="number" min="0"
             class="form-control col-md-1"/>

      <label for="dateOfBirthMonth"
             class="col-md-1 col-form-label text-right"
             style="margin-left: 20px; margin-right: 20px;">Month</label>
      <input id="dateOfBirthMonth" name="dateOfBirthMonth"
             formControlName="dateOfBirthMonth"
             type="number" min="0"
             class="form-control col-md-1"/>

      <label for="dateOfBirthYear"
             class="col-md-1 col-form-label text-right"
             style="margin-left: 20px; margin-right: 20px;">Year</label>
      <input id="dateOfBirthYear" name="dateOfBirthYear"
             formControlName="dateOfBirthYear"
             type="number" min="0"
             class="form-control col-md-1"/>

    </div>

    <div class="form-row" style="margin-top: 20px;">

      <label class="col-md-12 col-form-label" style="margin-top: 20px;">Date of death</label>

      <label for="dateOfDeathDayOfMonth"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Day</label>
      <input id="dateOfDeathDayOfMonth" name="dateOfDeathDayOfMonth"
             formControlName="dateOfDeathDayOfMonth"
             type="number" min="0"
             class="form-control col-md-1"/>

      <label for="dateOfDeathMonth"
             class="col-md-1 col-form-label text-right"
             style="margin-left: 20px; margin-right: 20px;">Month</label>
      <input id="dateOfDeathMonth" name="dateOfDeathMonth"
             formControlName="dateOfDeathMonth"
             type="number" min="0"
             class="form-control col-md-1"/>

      <label for="dateOfDeathYear"
             class="col-md-1 col-form-label text-right"
             style="margin-left: 20px; margin-right: 20px;">Year</label>
      <input id="dateOfDeathYear" name="dateOfDeathYear"
             formControlName="dateOfDeathYear"
             type="number" min="0"
             class="form-control col-md-1"/>

    </div>

    <!-- birth place -->
    <div class="form-row" style="margin-top: 20px;">

      <label class="col-md-12 col-form-label" style="margin-top: 20px;">Birth place</label>

      <label for="birthPlaceName"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Name</label>
      <input id="birthPlaceName" name="birthPlaceName"
             formControlName="birthPlaceName"
             type="text"
             class="form-control col-md-1"/>

      <label for="birthPlaceAltitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Altitude</label>
      <input id="birthPlaceAltitude" name="birthPlaceAltitude"
             formControlName="birthPlaceAltitude"
             type="text" class="form-control col-md-1"/>

      <label for="birthPlaceLatitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Latitude</label>
      <input id="birthPlaceLatitude" name="birthPlaceLatitude"
             formControlName="birthPlaceLatitude"
             type="text" class="form-control col-md-1"/>

      <label for="birthPlaceLongitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Longitude</label>
      <input id="birthPlaceLongitude" name="birthPlaceLongitude"
             formControlName="birthPlaceLongitude"
             type="text" class="form-control col-md-1"/>

    </div>

    <!-- death place -->
    <div class="form-row" style="margin-top: 20px;">

      <label class="col-md-12 col-form-label" style="margin-top: 20px;">Death place</label>

      <label for="deathPlaceName"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Name</label>
      <input id="deathPlaceName" name="deathPlaceName"
             formControlName="deathPlaceName"
             type="text" class="form-control col-md-1"/>

      <label for="deathPlaceAltitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Altitude</label>
      <input id="deathPlaceAltitude" name="deathPlaceAltitude"
             formControlName="deathPlaceAltitude"
             type="text" class="form-control col-md-1"/>

      <label for="deathPlaceLatitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Latitude</label>
      <input id="deathPlaceLatitude" name="deathPlaceLatitude"
             formControlName="deathPlaceLatitude"
             type="text" class="form-control col-md-1"/>

      <label for="deathPlaceLongitude"
             class="col-md-1 col-form-label text-right"
             style="margin-right: 20px;">Longitude</label>
      <input id="deathPlaceLongitude" name="deathPlaceLongitude"
             formControlName="deathPlaceLongitude"
             type="text" class="form-control col-md-1"/>

    </div>

    <div class="btn-toolbar" style="margin-top: 20px; margin-outside: 2px; ">
      <button type="close" class="btn btn-danger" (click)="closeForm()">Close Form</button>
      <button type="reset" class="btn btn-info">Clear Form</button>
      <button type="button" class="btn btn-success" (click)="saveChanges()">Submit</button>
    </div>

  </form>

</div>

<div *ngIf="httpError">
  <app-error-message [failedOperation]="operationMessage" [error]="httpError"></app-error-message>
</div>
